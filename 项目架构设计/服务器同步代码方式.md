不用FTP同步网站代码到服务器，可选择**基于SSH的文件传输/同步工具**、**版本控制工具（Git）**、**自动化部署工具**或**实时同步方案**等，这些方法更安全、高效，且适配不同开发/生产场景。以下是主流方案的详细实现：

### 一、基于SSH的文件传输与同步（最基础常用）
SSH是服务器的标配协议，基于SSH的工具无需额外安装服务（服务器端一般默认支持），且传输加密更安全。

#### 1. SCP（简单文件拷贝）
SCP是`cp`命令的SSH版，支持本地与远程、远程与远程的文件/目录拷贝，**适合单次小批量同步**。
- **基本语法**：
  ```bash
  # 本地目录推送到服务器
  scp -r 本地代码目录 服务器用户名@服务器IP:服务器目标目录
  # 示例：将本地dist目录推送到服务器/var/www/html
  scp -r ./dist root@192.168.1.100:/var/www/html
  ```
- **关键参数**：
  - `-r`：递归拷贝目录（必选，因为是网站代码目录）；
  - `-P`：指定服务器SSH端口（默认22，非默认端口需加，如`-P 2222`）；
  - `-C`：开启压缩传输，节省带宽（大文件推荐）。
- **优缺点**：
  ✅ 优点：无需配置，命令行直接用，跨平台（Linux/Mac/Windows（PowerShell））；
  ❌ 缺点：**全量传输**，每次都会重新拷贝所有文件，大目录同步效率低。

#### 2. Rsync（高效增量同步）
Rsync是Linux下的经典同步工具，**支持增量传输**（只同步变化的文件），且可删除远程多余文件，**适合频繁同步或大目录场景**。
- **基本语法**：
  ```bash
  # 本地目录推送到服务器（推荐用--delete保持两端目录一致）
  rsync -avz --delete 本地代码目录 服务器用户名@服务器IP:服务器目标目录
  # 示例：同步本地dist到服务器，并删除远程dist中本地没有的文件
  rsync -avz --delete ./dist root@192.168.1.100:/var/www/html/dist
  ```
- **关键参数**：
  - `-a`：归档模式，保留文件属性（权限、时间戳等）+递归拷贝，等同于`-rlptgoD`；
  - `-v`：显示同步详情；
  - `-z`：压缩传输；
  - `--delete`：删除远程目录中本地不存在的文件（确保两端目录完全一致，需谨慎使用）；
  - `--exclude`：排除指定文件/目录（如`--exclude="node_modules"`）。
- **进阶：SSH免密同步**
  每次输入密码太麻烦，可配置**SSH公钥免密登录**：
  1. 本地生成SSH密钥对：`ssh-keygen -t rsa`（一路回车即可）；
  2. 将公钥推送到服务器：`ssh-copy-id 服务器用户名@服务器IP`（输入服务器密码后，后续免密）。
- **优缺点**：
  ✅ 优点：增量传输，效率极高，支持过滤文件、删除冗余文件；
  ❌ 缺点：Windows需额外安装（如`cwRsync`），纯命令行操作（无图形界面）。

#### 3. SFTP（SSH文件传输协议，图形界面可选）
SFTP虽名字带FTP，但基于SSH协议（非FTP），是FTP的安全替代，支持图形化工具操作，适合习惯可视化界面的用户。
- **工具推荐**：
  - WinSCP（Windows）：免费，支持SFTP/SCP，界面类似FTP工具，拖放文件即可同步；
  - FileZilla（跨平台）：支持SFTP，在“站点管理器”中选择“SFTP - SSH File Transfer Protocol”，输入服务器IP、SSH端口、用户名密码即可连接；
  - Cyberduck（Mac/Windows）：高颜值SFTP工具。
- **优缺点**：
  ✅ 优点：图形界面直观，适合非技术人员，传输加密；
  ❌ 缺点：手动操作，无法自动化，适合少量文件同步。

### 二、基于Git的版本控制部署（开发团队首选）
将代码托管到Git仓库（GitHub/GitLab/Gitee/自建GitLab），服务器通过Git拉取/克隆代码，**兼顾版本管理与部署**，适合团队协作开发。

#### 1. 基础方案：服务器手动拉取代码
- **步骤1**：本地代码推送到Git远程仓库
  ```bash
  # 本地初始化Git（首次）
  git init
  git add .
  git commit -m "初始化网站代码"
  git remote add origin git@github.com:你的账号/你的仓库.git
  git push -u origin main
  ```
- **步骤2**：服务器克隆/拉取代码
  1. 服务器安装Git：`yum install git`（CentOS）/`apt install git`（Ubuntu）；
  2. 服务器进入网站根目录，克隆仓库：
     ```bash
     cd /var/www/html
     git clone git@github.com:你的账号/你的仓库.git .  # 注意末尾的.，表示克隆到当前目录
     ```
  3. 后续代码更新时，服务器执行拉取：
     ```bash
     git pull origin main  # 拉取最新代码
     ```
- **注意**：若为私有仓库，需在服务器配置Git公钥（将服务器的SSH公钥添加到Git仓库的部署密钥中）。

#### 2. 进阶方案：Git钩子自动部署（推送即部署）
通过Git的`post-receive`钩子，实现**本地推送到Git仓库后，服务器自动拉取代码**，无需手动操作。
- **步骤1**：服务器搭建裸仓库（用于接收推送）
  ```bash
  # 创建裸仓库目录（不存放代码，只存版本信息）
  mkdir -p /data/git/website.git
  cd /data/git/website.git
  git init --bare  # 初始化裸仓库
  ```
- **步骤2**：配置`post-receive`钩子脚本
  ```bash
  # 进入钩子目录，创建脚本
  cd hooks
  vi post-receive
  ```
  写入以下内容（替换为你的网站目录和Git仓库分支）：
  ```bash
  #!/bin/sh
  # 指定网站根目录
  TARGET_DIR="/var/www/html"
  # 指定Git分支（如main）
  BRANCH="main"

  # 拉取代码到目标目录
  while read oldrev newrev refname; do
    if [ "$refname" = "refs/heads/$BRANCH" ]; then
      echo "Deploying $BRANCH branch to $TARGET_DIR..."
      git --work-tree=$TARGET_DIR --git-dir=/data/git/website.git checkout -f $BRANCH
      echo "Deploy success!"
    fi
  done
  ```
- **步骤3**：赋予脚本执行权限
  ```bash
  chmod +x post-receive
  ```
- **步骤4**：本地添加服务器裸仓库为远程仓库，推送触发部署
  ```bash
  # 本地添加服务器远程仓库
  git remote add server root@192.168.1.100:/data/git/website.git
  # 推送代码到服务器，触发自动部署
  git push server main
  ```
- **优缺点**：
  ✅ 优点：版本管理+自动部署一体，适合团队开发，可回滚版本；
  ❌ 缺点：需搭建Git仓库（公有/私有），服务器需配置Git权限。

### 三、自动化部署工具（适合复杂场景/多服务器）
若需更灵活的部署流程（如编译代码、重启服务、多服务器同步），可使用自动化部署工具，替代手动命令。

#### 1. Fabric（Python轻量部署工具）
Fabric基于Python，通过编写简单的Python脚本，实现远程命令执行、文件上传、部署流程自动化。
- **步骤1**：本地安装Fabric
  ```bash
  pip install fabric  # Python2
  # 或Python3版本
  pip install fabric3
  ```
- **步骤2**：编写部署脚本`fabfile.py`
  ```python
  from fabric import Connection

  # 服务器配置
  HOST = "192.168.1.100"
  USER = "root"
  TARGET_DIR = "/var/www/html"

  def deploy():
      # 连接服务器
      c = Connection(host=HOST, user=USER)
      # 本地打包dist目录（示例）
      local("tar -zcf dist.tar.gz ./dist")
      # 上传压缩包到服务器
      c.put("dist.tar.gz", "/tmp/")
      # 服务器解压并覆盖目标目录
      c.run(f"tar -zxf /tmp/dist.tar.gz -C {TARGET_DIR} --overwrite")
      # 删除服务器临时文件
      c.run("rm -f /tmp/dist.tar.gz")
      # 本地删除压缩包
      local("rm -f dist.tar.gz")
      print("部署完成！")
  ```
- **步骤3**：执行部署
  ```bash
  fab deploy
  ```

#### 2. Ansible（配置管理+部署，适合多服务器）
Ansible是自动化运维工具，无需在服务器安装客户端，通过SSH批量管理服务器，适合**多服务器集群部署**。
- **核心思路**：编写`Playbook`（YAML配置文件），定义“同步代码”“重启服务”等任务，执行Playbook即可完成部署。
- **示例Playbook（`deploy.yml`）**：
  ```yaml
  - hosts: web_servers  # 目标服务器组（在/etc/ansible/hosts中定义）
    remote_user: root
    tasks:
      - name: 同步本地代码到服务器
        synchronize:
          src: ./dist/
          dest: /var/www/html/
          delete: yes  # 删除远程多余文件
      - name: 重启Nginx服务
        service:
          name: nginx
          state: restarted
  ```
- **执行部署**：
  ```bash
  ansible-playbook deploy.yml
  ```

### 四、实时同步方案（开发环境热更）
若开发环境需要**本地代码修改后，服务器自动同步**，可使用`Inotify-tools + Rsync`实现实时监控与同步。
- **步骤1**：本地安装`Inotify-tools`（监控文件变化）
  ```bash
  # CentOS
  yum install inotify-tools
  # Ubuntu
  apt install inotify-tools
  ```
- **步骤2**：编写实时同步脚本`sync.sh`
  ```bash
  #!/bin/bash
  # 本地代码目录
  LOCAL_DIR="./dist"
  # 服务器信息
  SERVER="root@192.168.1.100"
  REMOTE_DIR="/var/www/html/dist"

  # 监控文件变化，触发rsync同步
  inotifywait -mrq --format '%w%f' -e modify,create,delete,move $LOCAL_DIR | while read file
  do
    rsync -avz --delete $LOCAL_DIR $SERVER:$REMOTE_DIR
    echo "文件$file已同步到服务器"
  done
  ```
- **步骤3**：赋予脚本执行权限并运行
  ```bash
  chmod +x sync.sh
  ./sync.sh
  ```
- **优缺点**：
  ✅ 优点：开发环境实时同步，无需手动操作；
  ❌ 缺点：仅适合开发环境，生产环境不建议使用（易引发代码冲突）。

### 五、其他方案（容器化/云原生场景）
若网站采用容器化部署（Docker/K8s），可通过**镜像仓库**同步代码：
1. 本地编写`Dockerfile`，将代码打包成Docker镜像；
2. 推送镜像到私有/公有镜像仓库（如Docker Hub、Harbor）；
3. 服务器拉取最新镜像并重启容器：`docker pull 镜像名:版本 && docker restart 容器名`。

这种方式适合云原生架构，代码与环境解耦，部署更标准化。

### 总结
| 方案          | 核心优势                  | 适用场景                          |
|---------------|---------------------------|-----------------------------------|
| SCP           | 简单无配置                | 单次小文件/目录同步               |
| Rsync         | 增量传输，效率高          | 频繁同步、大目录同步              |
| Git部署       | 版本管理+团队协作         | 开发团队、需要版本回滚的场景      |
| Fabric/Ansible| 自动化部署、多服务器支持  | 生产环境、复杂部署流程            |
| Inotify+Rsync | 开发环境实时同步          | 本地开发→测试服务器热更           |
| Docker镜像    | 环境解耦、标准化          | 云原生/容器化部署场景             |

**安全建议**：无论使用哪种方法，都应开启SSH密钥登录（禁用密码登录），并限制服务器SSH端口的访问IP（通过防火墙/安全组）。