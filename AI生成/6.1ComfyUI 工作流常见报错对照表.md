# ComfyUI工作流常见报错对照表（适配Flux.1+Z_Image_Turbo）
以下对照表按**报错类型**分类，覆盖链路、参数、模型、硬件等核心场景，结合你常用的Flux.1和Z_Image_Turbo模型给出针对性解决方法，方便快速定位问题。

| 报错类型                | 具体现象                                  | 核心原因                                  | 适配Flux.1/Z_Image_Turbo的解决方法                          |
|-------------------------|-------------------------------------------|-------------------------------------------|-------------------------------------------------------------|
| **链路/数据类型类**     | 节点显示**红色**，提示“input missing”或“type mismatch” | 数据类型不匹配/关键输入未连接              | 1. 若KSampler变红：检查是否连接了`MODEL`（来自LoadCheckpoint）和`LATENT`（来自EmptyLatentImage/ImageToLatent），**不能用IMAGE替代LATENT**<br>2. 若Z_Image_Turbo（ImageUpscaleWithModel）变红：确认输入是`IMAGE`（来自VAEDecode），而非`LATENT`（超分节点不识别潜空间数据）<br>3. 若CLIPTextEncode (FLUX)变红：检查是否连接了LoadCheckpoint的`CLIP`输出，而非`MODEL`或`VAE` |
|                         | 生成后无图像输出，SaveImage节点无数据流入  | 解码链路断裂/节点顺序错误                 | 1. 确认KSampler的`latent_image`输出已连接到VAEDecode的对应输入<br>2. 确认VAEDecode已连接LoadCheckpoint的`VAE`输出<br>3. 超分节点需放在VAEDecode之后，不能直接接KSampler |
| **参数配置类**          | Flux.1生成图**过曝/色彩断层/畸形**        | KSampler的`cfg`值过高（Flux对CFG敏感）| 1. 将`cfg`从>7降至**5-7**<br>2. 同时将采样`steps`调整为25-30，避免高CFG+高步数叠加失真 |
|                         | 图生图完全偏离参考图，仅保留模糊轮廓      | KSampler的`denoise`值过高（Flux去噪强度敏感） | 1. 将`denoise`从>0.4降至**0.2-0.4**<br>2. 若需保留更多原图特征，可再降至0.2，同时在提示词中加入“keep original structure”类描述 |
|                         | Z_Image_Turbo超分后图像模糊/出现马赛克    | 超分倍数过高/基础图细节不足               | 1. 将`scale`从>4改为**4倍**（Z_Image_Turbo最优倍数）<br>2. 超分前确保Flux.1已生成足够细节（可先提升采样steps至30）<br>3. 超分后添加`ImageSharpen`节点，强度设0.1-0.2 |
|                         | 批量生成时提示“out of memory”（显存不足） | `batch_size`过大/图像尺寸过高             | 1. 将`batch_size`从4降至**1-2**<br>2. 把图像尺寸从1280×1280改为**1024×1024**（Flux.1最优轻量化尺寸） |
| **模型适配类**          | LoRA加载后无风格效果，图像和基础模型一致  | 非Flux兼容LoRA/权重过低                   | 1. 更换文件名带`flux`标识的**Flux专属LoRA**（SD1.5/SDXL LoRA无法生效）<br>2. 将LoRA的`strength_model/strength_clip`从<0.6提升至**0.7-0.9** |
|                         | ControlNet无法控制轮廓，图像仍随机生成    | ControlNet模型不兼容Flux/强度过低         | 1. 下载**Flux专属ControlNet模型**（如`controlnet-flux-canny.safetensors`，非SDXL版本）<br>2. 将ControlNetApply的`strength`从<0.5调至**0.6-0.7**，避免强度不足 |
|                         | 提示“model not found”，LoadCheckpoint无法加载模型 | 模型路径错误/格式不支持                   | 1. 确认Flux.1在`models/checkpoints`、Z_Image_Turbo在`models/upscale_models`目录<br>2. 仅支持`safetensors/pth`格式，gguf格式仅适用于LLM，不能加载Flux生成模型 |
| **硬件资源类**          | 采样过程中程序闪退/提示“CUDA out of memory” | 显存不足（Flux.1对显存要求高于SDXL）| 1. 启用“显存优化”：在ComfyUI设置中勾选`Enable low VRAM mode`<br>2. 关闭其他占用显存的程序（如浏览器/其他AI工具）<br>3. 改用Flux-fp8轻量化版本（比full版本节省30%显存） |
|                         | 超分速度极慢，单张图超分耗时超过生成时间  | Z_Image_Turbo未调用GPU/CPU运行效率低      | 1. 确认显卡驱动已更新，ComfyUI已启用CUDA加速（可在启动日志中查看“GPU detected”提示）<br>2. 若为AMD显卡，安装ROCm驱动并配置对应环境 |
| **其他类**              | 生成图像出现随机文字/水印，负面词无效     | Flux.1对长负面词不敏感/负面词不精准       | 1. 精简负面词至**30字以内**（Flux对冗长负面词响应弱）<br>2. 加入针对性负面词：`text, watermark, signature, logo`，而非泛化的“bad elements” |
|                         | 相同种子无法复现图像，每次生成结果不同    | 采样器不支持/节点参数被修改               | 1. Flux.1复现需选用**确定性采样器**（如`dpmpp_2m_karras`，避免用`euler_a`等随机性采样器）<br>2. 确保两次生成的`cfg/steps/denoise`参数完全一致 |

---

我可以帮你整理一份**Flux.1+Z_Image_Turbo工作流调试 Checklist**，让你按步骤自检，避免遗漏关键配置，需要吗？